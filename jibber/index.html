
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>
<title>Pitahaya</title>
<!-- fanfare 82087771170 LNT/doc/pitahaya/index -->
<!-- LNT informatique availability par //jollo.org/licensing/public/LNT-1.txt -->
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="generator" content="Jibber, see //jollo.org/LNT/jibber/index.html" />
<link rel="stylesheet" href="http://jollo.org/assets/jibber/css/alerts.css">
<link rel="stylesheet" href="http://jollo.org/assets/jibber/css/default.css">
</head>
<body>
<span class="h1"><img src="https://f001.backblazeb2.com/file/flower/anim.gif"> Pitahaya</span>
<hr>
Pitahaya is a node.js script which demonstrates encoding and decoding binary data over a video channel.
<hr>
<span class="h3">Demo</span>
To try it out, drag this bookmarklet <a href="javascript:(function()%7Blet%20optical%3Dfunction()%7Blet%20e%3Dfunction()%7Bconst%20e%3Dfunction()%7Bfunction%20e(e%2Ct%2Cn)%7Blet%20r%3De%3Breturn%20r%3D%220x%22%2Br%2Cr%3DparseInt(r%2C16)%2Cr%3D(r%2B%3Dn).toString(16)%2Ct.substring(0%2Ct.length-r.length)%2Br%7Dconst%20t%3D%5B0%2C0%2C0%2C32%2C102%2C116%2C121%2C112%2C105%2C115%2C111%2C109%2C0%2C0%2C2%2C0%2C105%2C115%2C111%2C109%2C105%2C115%2C111%2C54%2C105%2C115%2C111%2C50%2C109%2C112%2C52%2C49%2C0%2C0%2C2%2C159%2C109%2C111%2C111%2C118%2C0%2C0%2C0%2C108%2C109%2C118%2C104%2C100%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C3%2C232%2C0%2C0%2C0%2C0%2C0%2C1%2C0%2C0%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C64%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C2%2C0%2C0%2C1%2C161%2C116%2C114%2C97%2C107%2C0%2C0%2C0%2C92%2C116%2C107%2C104%2C100%2C0%2C0%2C0%2C3%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1%2C1%2C0%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C64%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1%2C61%2C109%2C100%2C105%2C97%2C0%2C0%2C0%2C32%2C109%2C100%2C104%2C100%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C172%2C68%2C0%2C0%2C0%2C0%2C85%2C196%2C0%2C0%2C0%2C0%2C0%2C45%2C104%2C100%2C108%2C114%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C115%2C111%2C117%2C110%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C83%2C111%2C117%2C110%2C100%2C72%2C97%2C110%2C100%2C108%2C101%2C114%2C0%2C0%2C0%2C0%2C232%2C109%2C105%2C110%2C102%2C0%2C0%2C0%2C16%2C115%2C109%2C104%2C100%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C36%2C100%2C105%2C110%2C102%2C0%2C0%2C0%2C28%2C100%2C114%2C101%2C102%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C12%2C117%2C114%2C108%2C32%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C172%2C115%2C116%2C98%2C108%2C0%2C0%2C0%2C96%2C115%2C116%2C115%2C100%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C80%2C109%2C112%2C52%2C97%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C2%2C0%2C16%2C0%2C0%2C0%2C0%2C172%2C68%2C0%2C0%2C0%2C0%2C0%2C44%2C101%2C115%2C100%2C115%2C0%2C0%2C0%2C0%2C3%2C128%2C128%2C128%2C27%2C0%2C1%2C0%2C4%2C128%2C128%2C128%2C13%2C107%2C21%2C0%2C0%2C0%2C0%2C1%2C244%2C0%2C0%2C0%2C0%2C0%2C6%2C128%2C128%2C128%2C1%2C2%2C0%2C0%2C0%2C16%2C115%2C116%2C116%2C115%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C16%2C115%2C116%2C115%2C99%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C20%2C115%2C116%2C115%2C122%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C16%2C115%2C116%2C99%2C111%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C40%2C109%2C118%2C101%2C120%2C0%2C0%2C0%2C32%2C116%2C114%2C101%2C120%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C98%2C117%2C100%2C116%2C97%2C0%2C0%2C0%2C90%2C109%2C101%2C116%2C97%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C33%2C104%2C100%2C108%2C114%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C109%2C100%2C105%2C114%2C97%2C112%2C112%2C108%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C45%2C105%2C108%2C115%2C116%2C0%2C0%2C0%2C37%2C169%2C116%2C111%2C111%2C0%2C0%2C0%2C29%2C100%2C97%2C116%2C97%2C0%2C0%2C0%2C1%2C0%2C0%2C0%2C0%2C76%2C97%2C118%2C102%2C53%2C56%2C46%2C52%2C56%2C46%2C49%2C48%2C48%5D%3Blet%20n%3D%5B%5D%2Cr%3D!0%2Ci%3D!1%2Cl%3D%7Bframe%3A%221%22%2Cgranular%3A%220%22%7D%2Co%3D%5B%5D%2Ca%3D%22%22%2Cs%3D!1%2Cf%3D%22%22%3Breturn%7Binterlace%3Afunction(u)%7Bif(n.push(...u)%2Cn.length%3C2500)return%20null%3Blet%20c%3D!0%3Bfor(%3Bc%3B)%7Bfor(let%20e%3D0%3Be%3Cn.length-900%3Be%2B%2B)%7Bif(255!%3D%3Dn%5Be%5D%7C%7C251!%3D%3Dn%5Be%2B1%5D%7C%7C146!%3D%3Dn%5Be%2B2%5D%26%26144!%3D%3Dn%5Be%2B2%5D)continue%3Blet%20t%3D146%3D%3D%3Dn%5Be%2B2%5D%3F418%3A417%3Bif(255!%3D%3Dn%5Be%2Bt%5D%7C%7C251!%3D%3Dn%5Be%2Bt%2B1%5D%7C%7C146!%3D%3Dn%5Be%2Bt%2B2%5D%26%26144!%3D%3Dn%5Be%2Bt%2B2%5D)continue%3Blet%20r%3D146%3D%3D%3Dn%5Be%2Bt%2B2%5D%3F418%3A417%3Bif(255%3D%3D%3Dn%5Be%2Bt%2Br%5D%26%26251%3D%3D%3Dn%5Be%2Bt%2Br%2B1%5D%26%26(146%3D%3D%3Dn%5Be%2Bt%2Br%2B2%5D%7C%7C144%3D%3D%3Dn%5Be%2Bt%2Br%2B2%5D))%7Bs%3D!0%2Ca%2B%3D146%3D%3D%3Dn%5Be%2B2%5D%3F%22-%22%3A%22x%22%2Cn.splice(0%2Ce)%2Cf%3Dn.splice(0%2Ct)%2Co.push(...f)%3Bbreak%7D%7Ds%7C%7Cn.splice(0%2Cn.length-900)%2C(a.length%3E38%7C%7Cn.length%3C900)%26%26(c%3D!1)%7Dif(a.length%3E38)%7Blet%20n%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Ca.length%3Be%2B%2B)%22x%22%3D%3D%3Da%5Be%5D%3Fn.push(...%5B161%2C0%2C0%2C1%5D)%3An.push(...%5B162%2C0%2C0%2C1%5D)%3Bn.pop()%3Blet%20u%3D%22x%22%3D%3D%3Da.substring(0%2C1)%3F161%3A162%2Cc%3D182-a.replace(%2F%5C-%2Fg%2C%22%22).length%2Cp%3D%5B%5D%3Br%26%26(r%3D!1%2Cp.push(...t))%3Blet%20h%3Dfunction(t%2Cn%2Cr)%7Blet%20o%3D%5B0%2C0%2C1%2C0%2C109%2C111%2C111%2C102%2C0%2C0%2C0%2C16%2C109%2C102%2C104%2C100%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C2%2C0%2C0%2C0%2C232%2C116%2C114%2C97%2C102%2C0%2C0%2C0%2C28%2C116%2C102%2C104%2C100%2C0%2C0%2C0%2C56%2C0%2C0%2C0%2C1%2C0%2C0%2C4%2C128%2C0%2C0%2C1%2C162%2C2%2C0%2C0%2C0%2C0%2C0%2C0%2C20%2C116%2C102%2C100%2C116%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C175%2C128%2C0%2C0%2C0%2C176%2C116%2C114%2C117%2C110%2C0%2C0%2C2%2C1%2C0%2C0%2C0%2C39%2C0%2C0%2C1%2C8%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C161%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C161%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C1%2C162%2C0%2C0%2C63%2C180%2C109%2C100%2C97%2C116%5D%2Ca%3D%22%22%2Cs%3D%22%22%3Bif(i)%7Bvar%20f%3De(l.granular%2C%22000000000000%22%2C44928)%2Cu%3De(l.frame%2C%2200000000%22%2C1)%2Cc%3Df%2Cp%3Du%3Bl.granular%3Df%2Cl.frame%3Du%2Ca%3Dp%2Cs%3Dc%7Delse%20i%3D!0%2Ca%3D%2200000001%22%2Cs%3D%22000000000000%22%3Bfor(let%20e%3D0%2Ct%3D20%3Be%3C8%3Be%2B%3D2%2Ct%2B%2B)%7Blet%20n%3Da.slice(e%2Ce%2B2)%3Bo%5Bt%5D%3DparseInt(%220x%22%2Bn%2C%22hex%22)%7Do%5B55%5D%3Dt%3Bfor(let%20e%3D0%2Ct%3D74%3Be%3C12%3Be%2B%3D2%2Ct%2B%2B)%7Blet%20n%3Ds.slice(e%2Ce%2B2)%3Bo%5Bt%5D%3DparseInt(%220x%22%2Bn%2C%22hex%22)%7Dfor(let%20e%3D0%2Ct%3D103%3Be%3Cn.length%3Be%2B%2B%2Ct%2B%2B)o%5Bt%5D%3Dn%5Be%5D%3Breturn%20o%5B259%5D%3Dr%2Co%7D(u%2Cn%2Cc)%3Breturn%20p.push(...h)%2Cp.push(...o)%2Cs%3D!1%2Ca%3D%22%22%2Co%3D%5B%5D%2Cf%3D%22%22%2Cp%7Dreturn%20null%7D%7D%7D()%3Bself.onmessage%3Dfunction(t)%7Blet%20n%3Dt.data%2Cr%3De.interlace(n)%3Br%26%26(r%3DUint8Array.from(r)%2CpostMessage(r))%7D%7D.toString()%3Be%3De.substring(e.indexOf(%22%7B%22)%2B1%2Ce.lastIndexOf(%22%7D%22))%3Blet%20t%3Dfunction()%7B!function()%7Bvar%20e%3D!1%2Ct%3D%2Fxyz%2F.test(function()%7Bxyz%7D)%3F%2F%5Cb_super%5Cb%2F%3A%2F.*%2F%3Bthis.Class%3Dfunction()%7B%7D%2CClass.extend%3Dfunction(n)%7Bvar%20r%3Dthis.prototype%3Be%3D!0%3Bvar%20i%3Dnew%20this%3Bfor(var%20l%20in%20e%3D!1%2Cn)i%5Bl%5D%3D%22function%22%3D%3Dtypeof%20n%5Bl%5D%26%26%22function%22%3D%3Dtypeof%20r%5Bl%5D%26%26t.test(n%5Bl%5D)%3Ffunction(e%2Ct)%7Breturn%20function()%7Bvar%20n%3Dthis._super%3Bthis._super%3Dr%5Be%5D%3Bvar%20i%3Dt.apply(this%2Carguments)%3Breturn%20this._super%3Dn%2Ci%7D%7D(l%2Cn%5Bl%5D)%3An%5Bl%5D%3Bfunction%20o()%7B!e%26%26this.init%26%26this.init.apply(this%2Carguments)%7Dreturn%20o.prototype%3Di%2Co.prototype.constructor%3Do%2Co.extend%3Darguments.callee%2Co%7D%7D()%3Bvar%20e%3DClass.extend(%7Binit%3Afunction(t)%7Bthis.nSym%3Dt%7C%7C10%2Cthis.codec%3Dnew%20e.Codec%7D%2Cencode%3Afunction(t)%7Bfor(var%20n%3De.Utils.unpack(t)%2Cr%3D255-this.nSym%2Ci%3D%5B%5D%2Cl%3D0%3Bl%3Cn.length%3Bl%2B%3Dr)%7Bvar%20o%3Dn.slice(l%2Cl%2Br)%3Bi%3Di.concat(this.codec.encodeMsg(o%2Cthis.nSym))%7Dreturn%20i%7D%2Cdecode%3Afunction(t)%7Bfor(var%20n%3D%5B%5D%2Cr%3D0%3Br%3Ct.length%3Br%2B%3D255)%7Bvar%20i%3Dt.slice(r%2Cr%2B255)%3Bn%3Dn.concat(this.codec.correctMsg(i%2Cthis.nSym))%7Dreturn%20e.Utils.pack(n)%7D%7D)%3Be.Utils%3D%7Bpack%3Afunction(e)%7Bfor(var%20t%3D%5B%5D%2Cn%3D0%2Cr%3De.length%3Bn%3Cr%3Bn%2B%2B)t.push(String.fromCharCode(e%5Bn%5D))%3Breturn%20t.join(%22%22)%7D%2Cunpack%3Afunction(e)%7Bfor(var%20t%3D%5B%5D%2Cn%3D0%2Cr%3De.length%3Bn%3Cr%3Bn%2B%2B)t.push(e.charCodeAt(n))%3Breturn%20t%7D%2CarrayFill%3Afunction(e%2Ct)%7Breturn%20Array.apply(null%2Cnew%20Array(e)).map(function()%7Breturn%20t%7D)%7D%2CsliceStep%3Afunction(e%2Ct%2Cn%2Cr)%7Bfor(var%20i%3DArray.prototype.slice.call(e%2Ct%2Cn)%2Cl%3D%5B%5D%2Co%3Di.length-1%3Bo%3E%3D0%3Bo--)o%25r%3D%3D0%26%26l.push(i%5Bo%5D)%3Breturn%20l.reverse()%2Cl%7D%7D%2Ce.GaloisField%3DClass.extend(%7BgfExp%3Ae.Utils.arrayFill(512%2C1)%2CgfLog%3Ae.Utils.arrayFill(256%2C0)%2Cinit%3Afunction()%7Bfor(var%20e%3D1%2Ct%3D1%3Bt%3C255%3Bt%2B%2B)256%26(e%3C%3C%3D1)%26%26(e%5E%3D285)%2Cthis.gfExp%5Bt%5D%3De%2Cthis.gfLog%5Be%5D%3Dt%3Bfor(t%3D255%3Bt%3C512%3Bt%2B%2B)this.gfExp%5Bt%5D%3Dthis.gfExp%5Bt-255%5D%7D%2Cmul%3Afunction(e%2Ct)%7Breturn%200%3D%3De%7C%7C0%3D%3Dt%3F0%3Athis.gfExp%5Bthis.gfLog%5Be%5D%2Bthis.gfLog%5Bt%5D%5D%7D%2Cdiv%3Afunction(e%2Ct)%7Bif(0%3D%3Dt)throw%22Division%20by%20zero.%22%3Breturn%200%3D%3De%3F0%3Athis.gfExp%5Bthis.gfLog%5Be%5D%2B255-this.gfLog%5Bt%5D%5D%7D%2CpolyScale%3Afunction(e%2Ct)%7Bfor(var%20n%3D%5B%5D%2Cr%3D0%3Br%3Ce.length%3Br%2B%2B)n.push(this.mul(e%5Br%5D%2Ct))%3Breturn%20n%7D%2CpolyAdd%3Afunction(t%2Cn)%7Bfor(var%20r%3Dt.length%2Ci%3Dn.length%2Cl%3DMath.max(r%2Ci)%2Co%3De.Utils.arrayFill(l%2C0)%2Ca%3Do.length%2Cs%3D0%3Bs%3Cr%3Bs%2B%2B)o%5Bs%2Ba-r%5D%3Dt%5Bs%5D%3Bfor(s%3D0%3Bs%3Ci%3Bs%2B%2B)o%5Bs%2Ba-i%5D%5E%3Dn%5Bs%5D%3Breturn%20o%7D%2CpolyMul%3Afunction(t%2Cn)%7Bfor(var%20r%3De.Utils.arrayFill(t.length%2Bn.length-1%2C0)%2Ci%3D0%3Bi%3Cn.length%3Bi%2B%2B)for(var%20l%3D0%3Bl%3Ct.length%3Bl%2B%2B)r%5Bl%2Bi%5D%5E%3Dthis.mul(t%5Bl%5D%2Cn%5Bi%5D)%3Breturn%20r%7D%2CpolyEval%3Afunction(e%2Ct)%7Bfor(var%20n%3De%5B0%5D%2Cr%3D1%3Br%3Ce.length%3Br%2B%2B)n%3Dthis.mul(n%2Ct)%5Ee%5Br%5D%3Breturn%20n%7D%7D)%2Ce.Codec%3DClass.extend(%7Binit%3Afunction()%7Bthis.gf%3Dnew%20e.GaloisField%7D%2CgeneratorPoly%3Afunction(e)%7Bfor(var%20t%3D%5B1%5D%2Cn%3D0%3Bn%3Ce%3Bn%2B%2B)t%3Dthis.gf.polyMul(t%2C%5B1%2Cthis.gf.gfExp%5Bn%5D%5D)%3Breturn%20t%7D%2CencodeMsg%3Afunction(t%2Cn)%7Bif(t.length%2Bn%3E255)throw%22Message%20too%20long.%22%3Bfor(var%20r%3Dthis.generatorPoly(n)%2Ci%3De.Utils.arrayFill(t.length%2Bn%2C0)%2Cl%3D0%3Bl%3Ct.length%3Bl%2B%2B)i%5Bl%5D%3Dt%5Bl%5D%3Bfor(l%3D0%3Bl%3Ct.length%3Bl%2B%2B)%7Bvar%20o%3Di%5Bl%5D%3Bif(0!%3Do)for(var%20a%3D0%3Ba%3Cr.length%3Ba%2B%2B)i%5Bl%2Ba%5D%5E%3Dthis.gf.mul(r%5Ba%5D%2Co)%7Dfor(l%3D0%3Bl%3Ct.length%3Bl%2B%2B)i%5Bl%5D%3Dt%5Bl%5D%3Breturn%20i%7D%2CcalcSyndromes%3Afunction(e%2Ct)%7Bfor(var%20n%3D%5B%5D%2Cr%3D0%3Br%3Ct%3Br%2B%2B)n.push(this.gf.polyEval(e%2Cthis.gf.gfExp%5Br%5D))%3Breturn%20n%7D%2CcorrectErrata%3Afunction(t%2Cn%2Cr)%7Bfor(var%20i%3D%5B1%5D%2Cl%3D0%3Bl%3Cr.length%3Bl%2B%2B)%7Bvar%20o%3Dthis.gf.gfExp%5Bt.length-1-r%5Bl%5D%5D%3Bi%3Dthis.gf.polyMul(i%2C%5Bo%2C1%5D)%7Dvar%20a%3Dn.slice(0%2Cr.length)%3Bfor(a.reverse()%2Ca%3D(a%3Dthis.gf.polyMul(a%2Ci)).slice(a.length-r.length%2Ca.length)%2Ci%3De.Utils.sliceStep(i%2C1%26i.length%2Ci.length%2C2)%2Cl%3D0%3Bl%3Cr.length%3Bl%2B%2B)%7Bo%3Dthis.gf.gfExp%5Br%5Bl%5D%2B256-t.length%5D%3Bvar%20s%3Dthis.gf.polyEval(a%2Co)%2Cf%3Dthis.gf.polyEval(i%2Cthis.gf.mul(o%2Co))%3Bt%5Br%5Bl%5D%5D%5E%3Dthis.gf.div(s%2Cthis.gf.mul(o%2Cf))%7Dreturn%20t%7D%2CrsFindErrors%3Afunction(e%2Ct)%7Bfor(var%20n%2Cr%3D%5B1%5D%2Ci%3D%5B1%5D%2Cl%3D0%3Bl%3Ce.length%3Bl%2B%2B)%7Bi.push(0)%3Bfor(var%20o%3De%5Bl%5D%2Ca%3D1%3Ba%3Cr.length%3Ba%2B%2B)o%5E%3Dthis.gf.mul(r%5Br.length-1-a%5D%2Ce%5Bl-a%5D)%3B0!%3Do%26%26(i.length%3Er.length%26%26(n%3Dthis.gf.polyScale(i%2Co)%2Ci%3Dthis.gf.polyScale(r%2Cthis.gf.div(1%2Co))%2Cr%3Dn)%2Cr%3Dthis.gf.polyAdd(r%2Cthis.gf.polyScale(i%2Co)))%7Dvar%20s%3Dr.length-1%3Bif(2*s%3Ee.length)throw%22Too%20many%20errors%20to%20correct%22%3Bvar%20f%3D%5B%5D%3Bfor(l%3D0%3Bl%3Ct%3Bl%2B%2B)0%3D%3Dthis.gf.polyEval(r%2Cthis.gf.gfExp%5B255-l%5D)%26%26f.push(t-1-l)%3Breturn%20f.length!%3Ds%3Fnull%3Af%7D%2CforneySyndromes%3Afunction(e%2Ct%2Cn)%7Bfor(var%20r%3De.slice(0)%2Ci%3D0%3Bi%3Ct.length%3Bi%2B%2B)%7Bfor(var%20l%3Dthis.gf.gfExp%5Bn-1-t%5Bi%5D%5D%2Co%3D0%3Bo%3Cr.length-1%3Bo%2B%2B)r%5Bo%5D%3Dthis.gf.mul(r%5Bo%5D%2Cl)%5Er%5Bo%2B1%5D%3Br.pop()%7Dreturn%20r%7D%2CcorrectMsg%3Afunction(e%2Ct)%7Bif(e.length%3E255)throw%22Message%20too%20long%22%3Bfor(var%20n%3De.slice(0)%2Cr%3D%5B%5D%2Ci%3D0%3Bi%3Cn.length%3Bi%2B%2B)n%5Bi%5D%3C0%26%26(n%5Bi%5D%3D0%2Cr.push(i))%3Bif(r.length%3Et)throw%22Too%20many%20erasures%20to%20correct%22%3Bvar%20l%3Dthis.calcSyndromes(n%2Ct)%3Bif(0%3D%3DMath.max.apply(null%2Cl))return%20n.slice(0%2Cn.length-t)%3Bvar%20o%3Dthis.forneySyndromes(l%2Cr%2Cn.length)%2Ca%3Dthis.rsFindErrors(o%2Cn.length)%3Bif(null%3D%3Da)throw%22Could%20not%20locate%20error%22%3Bif(n%3Dthis.correctErrata(n%2Cl%2Cr.concat(a))%2Cl%3Dthis.calcSyndromes(n%2Ct)%2CMath.max.apply(null%2Cl)%3E0)throw%22Could%20not%20correct%20message%22%3Breturn%20n.slice(0%2C-t)%7D%7D)%3Bconst%20t%3D%5B%7Bcellsizerow%3A3%2Ccanvaswidth%3A640%2Ccanvasheight%3A360%2Cdatacolumns%3A160%2Cdatarows%3A119%2Cincomingbytes%3A2e3%2Cbitspace%3A19040%2Creedsolomonbytes%3A38%2Cfps%3A8%7D%5D%2Cn%3D%7Bversion%3A%22%22%2Cmediatype%3A%22%22%2Cfid%3A%22%22%2Clastframebytes%3A%22%22%2Clastframebit%3A%22%22%2Cprotectedbit%3A%22%22%7D%3Blet%20r%2Ci%3D0%2Cl%3D0%2Co%3D!1%2Ca%3D!1%2Cs%3Dnull%2Cf%3D0%2Cu%3D0%2Cc%3D0%2Cp%3D0%2Ch%3D0%2Cg%3D0%2Cd%3D0%2Cy%3D0%2Cm%3D0%2Cv%3D0%2Cx%3D127%2Cb%3D2*x%2Cw%3Dnull%3Bconst%20M%3D%5B%22%22%2C%22%22%5D%3Bself.onmessage%3Dfunction(S)%7Blet%20E%3Dfunction(S)%7Blet%20E%3D1%2Ck%3D1%3Bfunction%20L(e%2Ct%2Cn%2Cr)%7Bfunction%20i(r%2Ci)%7Blet%20l%3D0%3Bfor(let%20o%3Dr%3Bo%3Ci%3Bo%2B%2B)l%2B%3DS%5B4*((t%2Bn)*h*y%2Be)*d%2B(4*(E%2Bo)%2Bk*(4*f))%5D%3Breturn%20l%7Dlet%20l%2Co%3Breturn%201%3D%3D%3Dr%3Fo%3D(l%3Di(0%2C2))%3Cb%3A2%3D%3D%3Dr%3Fo%3D(l%3Di(1%2C2))%3Cx%3A3%3D%3D%3Dr%26%26(o%3D(l%3Di(0%2C1))%3Cx)%2Co%3F1%3A0%7Dlet%20U%3D!1%3Bif(!a)%7Blet%20e%3D!1%2Cr%3D0%3Bfor(let%20t%3D0%3Bt%3C300%3Bt%2B%3D4)%7Bif(S%5Bt%2B0%5D%3Ex)%7Bd%3Dr%2Ce%3D!0%3Bbreak%7Dr%2B%2B%7Dif(e%26%260!%3D%3Dd%7C%7C(U%3D!0)%2C!U)%7Blet%20e%3D0%3Bfor(let%20t%3D4*d%3Bt%3C4*d*2%2B100%3Bt%2B%3D4)if(S%5Bt%2B0%5D%3Cx)%7Be%3Dt%2F4-d%3Bbreak%7De!%3D%3Dd%26%26(d%3D0%2CU%3D!0)%7Dif(!U)%7Blet%20e%3D%5B%5B4%2C%22version%22%5D%2C%5B4%2C%22mediatype%22%5D%2C%5B16%2C%22fid%22%5D%2C%5B24%2C%22lastframebytes%22%5D%2C%5B1%2C%22lastframebit%22%5D%2C%5B1%2C%22protectedbit%22%5D%5D%2Ct%3D3%3Bfor(let%20r%3D0%3Br%3Ce.length%3Br%2B%2B)%7Blet%20i%3De%5Br%5D%2Cl%3Di%5B0%5D%2Co%3Di%5B1%5D%2Ca%3D%22%22%2Cs%3DMath.ceil(2)-1%3Bfor(let%20e%3D0%3Be%3Cl%3Be%2B%2B)a%2B%3DS%5Bt*d*4%2Be*d*4%2B4*s%5D%3Ex%3F0%3A1%2Cn%5Bo%5D%3DparseInt(a%2C2)%3Bt%2B%3Dl%7D%7Dif(U%7C%7C0!%3Dn.mediatype%26%26(U%3D!0)%2C!U)%7Bi%3Dt%5Bn.mediatype%5D.fps%2Cc%3Dt%5Bn.mediatype%5D.bitspace%2Cp%3Dc%2Cl%3Dt%5Bn.mediatype%5D.reedsolomonbytes%2Cf%3Dt%5Bn.mediatype%5D.canvaswidth%2Cu%3Dt%5Bn.mediatype%5D.canvasheight%2Cy%3Dt%5Bn.mediatype%5D.cellsizerow%2Ch%3Dt%5Bn.mediatype%5D.datacolumns%2Cg%3Dt%5Bn.mediatype%5D.datarows%2Cv%3Dh*g%2CE%3DMath.ceil(d%2F2)-1%2Ck%3DMath.ceil(y%2F2)-1%2Cnull%3D%3D%3Ds%26%26(s%3Dnew%20Uint8ClampedArray(m%3Dc%2F8))%3Blet%20e%3DMath.floor(c%2Fh)%2B4%3Bfor(let%20t%3D0%3Bt%3Ce%3Bt%2B%2B)for(let%20e%3D0%3Be%3Ch%3Be%2B%3D4)%7Blet%20t%3De%252%3BM%5B0%5D%2B%3Dt%3F%2211%22%3A%2200%22%2CM%5B0%5D%2B%3D%2211%22%2CM%5B1%5D%2B%3Dt%3F%2200%22%3A%2211%22%2CM%5B1%5D%2B%3D%2200%22%7DM%5B0%5D%3DM%5B0%5D.slice(0%2Cc)%2CM%5B1%5D%3DM%5B1%5D.slice(0%2Cc)%7DU%7C%7C(a%3D!0)%7Dif(U)return%20null%3Bif(0%3D%3D%3DL(h-4%2C0%2C0%2C1))return%20null%3Bvar%20C%3DL(h-2%2C0%2C0%2C1)%3Bif(o)%7Bif(w%3D%3D%3DC)return%20null%7Delse%20o%3D!0%3Bw%3DC%3Blet%20z%3Ds.length%3Bvar%20T%3DL(51%2C0%2C0%2C1)%3Bif(1%3D%3DT)%7Blet%20e%3D%22%22%3Bfor(let%20t%3D0%3Bt%3C24%3Bt%2B%2B)e%2B%3DL(t%2B27%2C0%2C0%2C1)%3B(e%3DparseInt(e%2C2))%3C%3Dc%26%26(c%3De)%2Cz%3Dc%2F8%7Dfunction%20I(e)%7Blet%20t%3D%22%22%2Cn%3D0%3Bfor(let%20r%3D0%3Br%3Cg%3Br%2B%2B)%7Bfor(let%20i%3D0%3Bi%3Ch%26%26(t%2B%3DL(i%2Cr%2C1%2Ce)%2C!(n%3E%3Dc))%3Bi%2B%2B)n%2B%2B%3Bif(n%3E%3Dc)break%7Dlet%20r%3D%22%22%2Ci%3Dw%3F1%3A0%3Bfor(let%20e%3D0%3Be%3Ct.length%3Be%2B%2B)r%2B%3Dt%5Be%5D%5EM%5Bi%5D%5Be%5D%3Blet%20l%3D0%2Co%3Dr.length%2F8%3Bfor(let%20e%3D0%3Be%3Co%3Be%2B%2B)%7Blet%20t%3D%22%22%3Bfor(let%20e%3D0%3Be%3C8%3Be%2B%2B)t%2B%3Dr%5Bl%5D%2Cl%2B%2B%3Bs%5Be%5D%3DparseInt(t%2C2)%7Dlet%20a%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Cz%3Be%2B%2B)a.push(s%5Be%5D)%3Breturn%20a%7Dlet%20A%2Cj%3D!1%3Bvar%20F%3Dnew%20e(l)%3Bfor(let%20e%3D1%3Be%3C4%26%26!j%3Be%2B%2B)try%7Blet%20t%3DI(e)%3BA%3DF.decode(t)%2Cj%3D!0%3Bbreak%7Dcatch(e)%7B%7Dif(!j)return%20null%3Br%26%261!%3DT%7C%7C(r%3Dnew%20Uint8Array(A.length))%3Bfor(let%20e%3D0%3Be%3CA.length%3Be%2B%2B)r%5Be%5D%3DA%5Be%5D.charCodeAt()%3Breturn%201%3D%3DT%26%26(z%3D(c%3Dp)%2F8%2CT%3D0)%2C%5Br%2Cn%5D%7D(S.data)%3BE%26%26postMessage(E)%7D%7D.toString()%3Bt%3Dt.substring(t.indexOf(%22%7B%22)%2B1%2Ct.lastIndexOf(%22%7D%22))%3Bif(Object.defineProperty(HTMLMediaElement.prototype%2C%22playing%22%2C%7Bget%3Afunction()%7Breturn!!(this.currentTime%3E0%26%26!this.paused%26%26!this.ended%26%26this.readyState%3E2)%7D%7D)%2C%22undefined%22%3D%3Dtypeof%20Worker)return%20alert(%22browser%20does%20not%20support%20webworkers%22)%2Cnull%3Bif(!1%20in%20window)return%20alert(%22browser%20does%20not%20support%20the%20mediasource%20property%22)%2Cnull%3Blet%20n%3D%22audio%2Fmpeg%22%3Bif(!MediaSource.isTypeSupported(n)%26%26(n%3D'audio%2Fmp4%3B%20codecs%3D%22mp3%22'%2C!MediaSource.isTypeSupported(n)))return%20alert('cannot%20play%20media%20-%20browser%20mediasource%20does%20not%20support%20either%20audio%2Fmpeg%20or%20audio%2Fmp4%3B%20codecs%3D%22mp3%22')%2Cnull%3Bvar%20r%3Ddocument.querySelector(%22%23secondary-inner%22)%3Br%26%26r.remove()%3Bvar%20i%3Ddocument.querySelector(%22%23comments%22)%3Blet%20l%2Co%3Bi%26%26i.remove()%2Cdocument.body.insertAdjacentHTML(%22afterbegin%22%2C'%3Cstyle%3E%23pitahayax%20div%20%7B%20box-sizing%3Aborder-box%3B%7D%20%23pitahayax%20%3A%3Aselection%20%7B%20background%3A%20%230f9%20%7D%20%23pitahayax%20%3A%3A-moz-selection%20%7B%20background%3A%20%230f9%20%7D%20%23pitahayax%20.unused%20%7Bdisplay%3Anone!important%7D%3C%2Fstyle%3E%3Cdiv%20id%3D%22pitahayax%22%20style%3D%22background%3Ablack%3Bposition%3Afixed%3Btop%3A0%3Bleft%3A0%3Bz-index%3A99999999%3Bdisplay%3Aflex%3Bflex-direction%3Arow%3Bpadding%3A4px%3B%22%3E%3Caudio%20id%3D%22xaudio%22%20controls%20style%3D%22width%3A150px%3Bheight%3A30px%3Bdisplay%3Anone%22%3E%3C%2Faudio%3E%3Cdiv%20id%3D%22togglebutton%22%20class%3D%22%22%20style%3D%22cursor%3Apointer%3Bmargin-right%3A4px%3Bcolor%3A%230f9%3Bdisplay%3Aflex%3Bborder%3A1px%20solid%20%230f9%3Bmin-width%3A55px%3Bmin-height%3A24px%3Bmax-height%3A24px%3Bline-height%3A15px%3Bfont-size%3A11px%3Bfont-family%3Aconsolas%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Buser-select%3Anone%3B-moz-user-select%3Anone%3Bpadding-left%3A1px%3Bfont-weight%3A500%3Buser-select%3Anone%22%3Eplay%3C%2Fdiv%3E%3Cdiv%20style%3D%22display%3Aflex%3Bborder%3A1px%20solid%20%230f9%3Bmin-width%3A180px%3Bmin-height%3A24px%3Bfont-size%3A11px%3Bfont-family%3Aconsolas%3Bcolor%3A%230f9%3Balign-items%3Acenter%3Bpadding-left%3A6px%3Bfont-weight%3A500%3Bposition%3Arelative%3Bwhite-space%3Apre%22%20id%3D%22attxdisplay%22%3Epitahaya.jollo.org%3C%2Fdiv%3E%3Cdiv%20class%3D%22unused%22%20style%3D%22margin-left%3A5px%3Bdisplay%3Aflex%3Bborder%3A1px%20solid%20%230f9%3Bmin-width%3A86px%3Bmax-width%3A86px%3Bmin-height%3A24px%3Bfont-size%3A11px%3Bfont-family%3Aconsolas%3Bcolor%3A%230f9%3Balign-items%3Acenter%3Bpadding-left%3A5px%3Buser-select%3Anone%3Bfont-weight%3A500%22%3E%3Cinput%20style%3D%22background%3Ablack%3Bborder%3Anone%3Bcolor%3A%230f9%3Bwidth%3A70px%3Bfont-size%3A11px%3Bfont-family%3Aconsolas%22%20placeholder%3D%22%22%20autocomplete%3D%22off%22%20autocorrect%3D%22off%22%20autocapitalize%3D%22off%22%20spellcheck%3D%22false%22%20%2F%3E%3C%2Fdiv%3E%3C%2Fdiv%3E')%3Bvar%20a%3Dnull%2Cs%3Dnull%2Cf%3Dnull%2Cu%3Ddocument.createElement(%22canvas%22)%3Bu.width%3D640%2Cu.height%3D360%3Bvar%20c%3Du.getContext(%222d%22)%3Blet%20p%3D!1%2Ch%3D!1%3Bfunction%20g()%7Blet%20r%3D!0%3Bif(p)return%3Bif((l%3Ddocument.querySelector(%22%23movie_player%20%3E%20div.html5-video-container%20%3E%20video%22))%7C%7C(l%3Ddocument.querySelector(%22video%22))%2C!l)return%20alert(%22no%20video%20player%20found%20on%20the%20page..%22)%2Cnull%3Bl.playing%7C%7Cl.play()%3Blet%20i%3Dl.videoHeight%2Cu%3Dl.videoWidth%3Bif(360!%3D%3Di%7C%7C640!%3D%3Du)return%20alert(%22please%20set%20video%20resolution%20to%20360p%20before%20starting..%22)%2Cnull%3Bp%3D!0%3Bvar%20g%3Bg%3Dnew%20MediaSource%2C(o%3Ddocument.querySelector(%22%23xaudio%22)).src%3DURL.createObjectURL(g)%2Co.oncanplaythrough%3Dfunction()%7Br%26%26(r%3D!1%2Co.volume%3D1%2CsetTimeout(()%3D%3E%7Bo.play()%7D%2C2e3))%7D%2Cg.addEventListener(%22sourceopen%22%2Cfunction()%7Bvar%20r%3Dthis.addSourceBuffer(n)%3Bif(null%3D%3Da)%7Bvar%20i%3Dnew%20Blob(%5Bt%5D%2C%7Btype%3A%22application%2Fjavascript%22%7D)%3Ba%3Dnew%20Worker(URL.createObjectURL(i))%7Dlet%20o%3Ddocument.getElementById(%22attxdisplay%22)%3Bif(a.onmessage%3Dfunction(e)%7Bswitch(e.data%5B1%5D.mediatype)%7Bcase%200%3A%22audio%2Fmpeg%22%3D%3D%3Dn%3Fr.appendBuffer(e.data%5B0%5D)%3A(o.innerHTML%3D%22proc%20%22%2Be.data%5B0%5D.length%2Cf.postMessage(e.data%5B0%5D))%7D%7D%2Cnull%3D%3Df)%7Bvar%20u%3Dnew%20Blob(%5Be%5D%2C%7Btype%3A%22application%2Fjavascript%22%7D)%3Bf%3Dnew%20Worker(URL.createObjectURL(u))%7Df.onmessage%3Dfunction(e)%7Br.appendBuffer(e.data.buffer)%7D%3Bvar%20p%2Cg%3D62.5%3Bfunction%20d()%7Bif(!h)return%20null%3Bvar%20e%3DDate.now()-p%3Bp%2B%3Dg%3Bvar%20t%3DMath.max(0%2Cg-e)%3Bl.playing%26%26function()%7Bc.drawImage(l%2C0%2C0)%3Bvar%20e%3Dc.getImageData(0%2C0%2C640%2C360).data%3Ba.postMessage(e)%7D()%2CsetTimeout(d%2Ct)%7Dh%3D!0%2Cp%3DDate.now()%2Bg%2Cs%3DsetTimeout(d%2Cg)%7D)%7Dlet%20d%3Ddocument.getElementById(%22togglebutton%22)%3Breturn%20d.addEventListener(%22click%22%2Cfunction()%7Bp%3F(d.innerHTML%3D%22play%22%2Co.volume%3D0%2Cp%3D!1%2Ch%3D!1%2Cl.pause()%2CclearTimeout(s)%2Ca%26%26a.terminate()%2Cf%26%26f.terminate()%2Ca%3Dnull%2Cf%3Dnull)%3A(d.innerHTML%3D%22pause%22%2Cg())%7D)%2Cnull%7D()%7D)()">Pitahaya v.0</a> ‚Üê to your bookmark bar and open it on this youtube video: <a href="https://youtu.be/GyATVQ8Y57Y">https://youtu.be/GyATVQ8Y57Y</a>. (More bookmarklet info <a href="bookmarklet.html">here</a>).
<hr>
<span class="h3">Download</span>
First install <a href="https&#58;&#47;&#47;nodejs.org&#47;en&#47;">node.js</a>. Then install Pitahaya via
<pre class="block code">npm install &#45;g pitahaya</pre>
Or get the source <a href="http&#58;&#47;&#47;github.com&#47;fanfare&#47;pitahaya">here</a>.
<hr>
<span class="h3"><a href="livestreaming.html">Live streaming</a></span>
With Pitahaya, you can transmit audio data in real time over the video channel of a live stream. The video will appear silent to anyone not decoding the stream with Pitahaya.
<hr>
<span class="h3"><a href="archiving.html">Archiving uncompressed audio</a></span>
Suppose you want to release some uncompressed music on youtube. There really isn&#39;t a way to do this natively on Youtube &#45;&#45; the music in the audio channel will be compressed once you upload your video file. With Pitahaya, you can use the video channel to store the uncompressed audio data. A listener can listen to your track on youtube, and if they like it and want a hard copy, they can download the video with youtube&#45;dl as normal, but can now extract the uncompressed audio from the video channel with pitahaya, getting the music in its original quality.
<hr>
The current version of Pitahaya is <span class="inline code">0.1.2</span>
<br>
<i>Page last updated November 9, 2020 by <a href="http&#58;&#47;&#47;jollo.org&#47;LNT&#47;home&#47;fanfare">fanfare</a></i>
</body>
</html>
