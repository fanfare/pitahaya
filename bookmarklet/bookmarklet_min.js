let optical=function(){let e=function(){const e=function(){function e(e,t,n){let r=e;return r="0x"+r,r=parseInt(r,16),r=(r+=n).toString(16),t.substring(0,t.length-r.length)+r}const t=[0,0,0,32,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,54,105,115,111,50,109,112,52,49,0,0,2,159,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,161,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,1,61,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,0,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,0,232,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,172,115,116,98,108,0,0,0,96,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,80,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,44,101,115,100,115,0,0,0,0,3,128,128,128,27,0,1,0,4,128,128,128,13,107,21,0,0,0,0,1,244,0,0,0,0,0,6,128,128,128,1,2,0,0,0,16,115,116,116,115,0,0,0,0,0,0,0,0,0,0,0,16,115,116,115,99,0,0,0,0,0,0,0,0,0,0,0,20,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,115,116,99,111,0,0,0,0,0,0,0,0,0,0,0,40,109,118,101,120,0,0,0,32,116,114,101,120,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,56,46,52,56,46,49,48,48];let n=[],r=!0,i=!1,l={frame:"1",granular:"0"},o=[],a="",s=!1,f="";return{interlace:function(u){if(n.push(...u),n.length<2500)return null;let c=!0;for(;c;){for(let e=0;e<n.length-900;e++){if(255!==n[e]||251!==n[e+1]||146!==n[e+2]&&144!==n[e+2])continue;let t=146===n[e+2]?418:417;if(255!==n[e+t]||251!==n[e+t+1]||146!==n[e+t+2]&&144!==n[e+t+2])continue;let r=146===n[e+t+2]?418:417;if(255===n[e+t+r]&&251===n[e+t+r+1]&&(146===n[e+t+r+2]||144===n[e+t+r+2])){s=!0,a+=146===n[e+2]?"-":"x",n.splice(0,e),f=n.splice(0,t),o.push(...f);break}}s||n.splice(0,n.length-900),(a.length>38||n.length<900)&&(c=!1)}if(a.length>38){let n=[];for(let e=0;e<a.length;e++)"x"===a[e]?n.push(...[161,0,0,1]):n.push(...[162,0,0,1]);n.pop();let u="x"===a.substring(0,1)?161:162,c=182-a.replace(/\-/g,"").length,p=[];r&&(r=!1,p.push(...t));let h=function(t,n,r){let o=[0,0,1,0,109,111,111,102,0,0,0,16,109,102,104,100,0,0,0,0,0,0,0,2,0,0,0,232,116,114,97,102,0,0,0,28,116,102,104,100,0,0,0,56,0,0,0,1,0,0,4,128,0,0,1,162,2,0,0,0,0,0,0,20,116,102,100,116,1,0,0,0,0,0,0,0,0,0,175,128,0,0,0,176,116,114,117,110,0,0,2,1,0,0,0,39,0,0,1,8,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,161,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,162,0,0,1,161,0,0,1,162,0,0,1,162,0,0,1,162,0,0,63,180,109,100,97,116],a="",s="";if(i){var f=e(l.granular,"000000000000",44928),u=e(l.frame,"00000000",1),c=f,p=u;l.granular=f,l.frame=u,a=p,s=c}else i=!0,a="00000001",s="000000000000";for(let e=0,t=20;e<8;e+=2,t++){let n=a.slice(e,e+2);o[t]=parseInt("0x"+n,"hex")}o[55]=t;for(let e=0,t=74;e<12;e+=2,t++){let n=s.slice(e,e+2);o[t]=parseInt("0x"+n,"hex")}for(let e=0,t=103;e<n.length;e++,t++)o[t]=n[e];return o[259]=r,o}(u,n,c);return p.push(...h),p.push(...o),s=!1,a="",o=[],f="",p}return null}}}();self.onmessage=function(t){let n=t.data,r=e.interlace(n);r&&(r=Uint8Array.from(r),postMessage(r))}}.toString();e=e.substring(e.indexOf("{")+1,e.lastIndexOf("}"));let t=function(){!function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(n){var r=this.prototype;e=!0;var i=new this;for(var l in e=!1,n)i[l]="function"==typeof n[l]&&"function"==typeof r[l]&&t.test(n[l])?function(e,t){return function(){var n=this._super;this._super=r[e];var i=t.apply(this,arguments);return this._super=n,i}}(l,n[l]):n[l];function o(){!e&&this.init&&this.init.apply(this,arguments)}return o.prototype=i,o.prototype.constructor=o,o.extend=arguments.callee,o}}();var e=Class.extend({init:function(t){this.nSym=t||10,this.codec=new e.Codec},encode:function(t){for(var n=e.Utils.unpack(t),r=255-this.nSym,i=[],l=0;l<n.length;l+=r){var o=n.slice(l,l+r);i=i.concat(this.codec.encodeMsg(o,this.nSym))}return i},decode:function(t){for(var n=[],r=0;r<t.length;r+=255){var i=t.slice(r,r+255);n=n.concat(this.codec.correctMsg(i,this.nSym))}return e.Utils.pack(n)}});e.Utils={pack:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(String.fromCharCode(e[n]));return t.join("")},unpack:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e.charCodeAt(n));return t},arrayFill:function(e,t){return Array.apply(null,new Array(e)).map(function(){return t})},sliceStep:function(e,t,n,r){for(var i=Array.prototype.slice.call(e,t,n),l=[],o=i.length-1;o>=0;o--)o%r==0&&l.push(i[o]);return l.reverse(),l}},e.GaloisField=Class.extend({gfExp:e.Utils.arrayFill(512,1),gfLog:e.Utils.arrayFill(256,0),init:function(){for(var e=1,t=1;t<255;t++)256&(e<<=1)&&(e^=285),this.gfExp[t]=e,this.gfLog[e]=t;for(t=255;t<512;t++)this.gfExp[t]=this.gfExp[t-255]},mul:function(e,t){return 0==e||0==t?0:this.gfExp[this.gfLog[e]+this.gfLog[t]]},div:function(e,t){if(0==t)throw"Division by zero.";return 0==e?0:this.gfExp[this.gfLog[e]+255-this.gfLog[t]]},polyScale:function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(this.mul(e[r],t));return n},polyAdd:function(t,n){for(var r=t.length,i=n.length,l=Math.max(r,i),o=e.Utils.arrayFill(l,0),a=o.length,s=0;s<r;s++)o[s+a-r]=t[s];for(s=0;s<i;s++)o[s+a-i]^=n[s];return o},polyMul:function(t,n){for(var r=e.Utils.arrayFill(t.length+n.length-1,0),i=0;i<n.length;i++)for(var l=0;l<t.length;l++)r[l+i]^=this.mul(t[l],n[i]);return r},polyEval:function(e,t){for(var n=e[0],r=1;r<e.length;r++)n=this.mul(n,t)^e[r];return n}}),e.Codec=Class.extend({init:function(){this.gf=new e.GaloisField},generatorPoly:function(e){for(var t=[1],n=0;n<e;n++)t=this.gf.polyMul(t,[1,this.gf.gfExp[n]]);return t},encodeMsg:function(t,n){if(t.length+n>255)throw"Message too long.";for(var r=this.generatorPoly(n),i=e.Utils.arrayFill(t.length+n,0),l=0;l<t.length;l++)i[l]=t[l];for(l=0;l<t.length;l++){var o=i[l];if(0!=o)for(var a=0;a<r.length;a++)i[l+a]^=this.gf.mul(r[a],o)}for(l=0;l<t.length;l++)i[l]=t[l];return i},calcSyndromes:function(e,t){for(var n=[],r=0;r<t;r++)n.push(this.gf.polyEval(e,this.gf.gfExp[r]));return n},correctErrata:function(t,n,r){for(var i=[1],l=0;l<r.length;l++){var o=this.gf.gfExp[t.length-1-r[l]];i=this.gf.polyMul(i,[o,1])}var a=n.slice(0,r.length);for(a.reverse(),a=(a=this.gf.polyMul(a,i)).slice(a.length-r.length,a.length),i=e.Utils.sliceStep(i,1&i.length,i.length,2),l=0;l<r.length;l++){o=this.gf.gfExp[r[l]+256-t.length];var s=this.gf.polyEval(a,o),f=this.gf.polyEval(i,this.gf.mul(o,o));t[r[l]]^=this.gf.div(s,this.gf.mul(o,f))}return t},rsFindErrors:function(e,t){for(var n,r=[1],i=[1],l=0;l<e.length;l++){i.push(0);for(var o=e[l],a=1;a<r.length;a++)o^=this.gf.mul(r[r.length-1-a],e[l-a]);0!=o&&(i.length>r.length&&(n=this.gf.polyScale(i,o),i=this.gf.polyScale(r,this.gf.div(1,o)),r=n),r=this.gf.polyAdd(r,this.gf.polyScale(i,o)))}var s=r.length-1;if(2*s>e.length)throw"Too many errors to correct";var f=[];for(l=0;l<t;l++)0==this.gf.polyEval(r,this.gf.gfExp[255-l])&&f.push(t-1-l);return f.length!=s?null:f},forneySyndromes:function(e,t,n){for(var r=e.slice(0),i=0;i<t.length;i++){for(var l=this.gf.gfExp[n-1-t[i]],o=0;o<r.length-1;o++)r[o]=this.gf.mul(r[o],l)^r[o+1];r.pop()}return r},correctMsg:function(e,t){if(e.length>255)throw"Message too long";for(var n=e.slice(0),r=[],i=0;i<n.length;i++)n[i]<0&&(n[i]=0,r.push(i));if(r.length>t)throw"Too many erasures to correct";var l=this.calcSyndromes(n,t);if(0==Math.max.apply(null,l))return n.slice(0,n.length-t);var o=this.forneySyndromes(l,r,n.length),a=this.rsFindErrors(o,n.length);if(null==a)throw"Could not locate error";if(n=this.correctErrata(n,l,r.concat(a)),l=this.calcSyndromes(n,t),Math.max.apply(null,l)>0)throw"Could not correct message";return n.slice(0,-t)}});const t=[{cellsizerow:3,canvaswidth:640,canvasheight:360,datacolumns:160,datarows:119,incomingbytes:2e3,bitspace:19040,reedsolomonbytes:38,fps:8}],n={version:"",mediatype:"",fid:"",lastframebytes:"",lastframebit:"",protectedbit:""};let r,i=0,l=0,o=!1,a=!1,s=null,f=0,u=0,c=0,p=0,h=0,g=0,d=0,y=0,m=0,v=0,x=127,b=2*x,w=null;const M=["",""];self.onmessage=function(S){let E=function(S){let E=1,k=1;function L(e,t,n,r){function i(r,i){let l=0;for(let o=r;o<i;o++)l+=S[4*((t+n)*h*y+e)*d+(4*(E+o)+k*(4*f))];return l}let l,o;return 1===r?o=(l=i(0,2))<b:2===r?o=(l=i(1,2))<x:3===r&&(o=(l=i(0,1))<x),o?1:0}let U=!1;if(!a){let e=!1,r=0;for(let t=0;t<300;t+=4){if(S[t+0]>x){d=r,e=!0;break}r++}if(e&&0!==d||(U=!0),!U){let e=0;for(let t=4*d;t<4*d*2+100;t+=4)if(S[t+0]<x){e=t/4-d;break}e!==d&&(d=0,U=!0)}if(!U){let e=[[4,"version"],[4,"mediatype"],[16,"fid"],[24,"lastframebytes"],[1,"lastframebit"],[1,"protectedbit"]],t=3;for(let r=0;r<e.length;r++){let i=e[r],l=i[0],o=i[1],a="",s=Math.ceil(2)-1;for(let e=0;e<l;e++)a+=S[t*d*4+e*d*4+4*s]>x?0:1,n[o]=parseInt(a,2);t+=l}}if(U||0!=n.mediatype&&(U=!0),!U){i=t[n.mediatype].fps,c=t[n.mediatype].bitspace,p=c,l=t[n.mediatype].reedsolomonbytes,f=t[n.mediatype].canvaswidth,u=t[n.mediatype].canvasheight,y=t[n.mediatype].cellsizerow,h=t[n.mediatype].datacolumns,g=t[n.mediatype].datarows,v=h*g,E=Math.ceil(d/2)-1,k=Math.ceil(y/2)-1,null===s&&(s=new Uint8ClampedArray(m=c/8));let e=Math.floor(c/h)+4;for(let t=0;t<e;t++)for(let e=0;e<h;e+=4){let t=e%2;M[0]+=t?"11":"00",M[0]+="11",M[1]+=t?"00":"11",M[1]+="00"}M[0]=M[0].slice(0,c),M[1]=M[1].slice(0,c)}U||(a=!0)}if(U)return null;if(0===L(h-4,0,0,1))return null;var C=L(h-2,0,0,1);if(o){if(w===C)return null}else o=!0;w=C;let z=s.length;var T=L(51,0,0,1);if(1==T){let e="";for(let t=0;t<24;t++)e+=L(t+27,0,0,1);(e=parseInt(e,2))<=c&&(c=e),z=c/8}function I(e){let t="",n=0;for(let r=0;r<g;r++){for(let i=0;i<h&&(t+=L(i,r,1,e),!(n>=c));i++)n++;if(n>=c)break}let r="",i=w?1:0;for(let e=0;e<t.length;e++)r+=t[e]^M[i][e];let l=0,o=r.length/8;for(let e=0;e<o;e++){let t="";for(let e=0;e<8;e++)t+=r[l],l++;s[e]=parseInt(t,2)}let a=[];for(let e=0;e<z;e++)a.push(s[e]);return a}let A,j=!1;var F=new e(l);for(let e=1;e<4&&!j;e++)try{let t=I(e);A=F.decode(t),j=!0;break}catch(e){}if(!j)return null;r&&1!=T||(r=new Uint8Array(A.length));for(let e=0;e<A.length;e++)r[e]=A[e].charCodeAt();return 1==T&&(z=(c=p)/8,T=0),[r,n]}(S.data);E&&postMessage(E)}}.toString();t=t.substring(t.indexOf("{")+1,t.lastIndexOf("}"));if(Object.defineProperty(HTMLMediaElement.prototype,"playing",{get:function(){return!!(this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2)}}),"undefined"==typeof Worker)return alert("browser does not support webworkers"),null;if(!1 in window)return alert("browser does not support the mediasource property"),null;let n="audio/mpeg";if(!MediaSource.isTypeSupported(n)&&(n='audio/mp4; codecs="mp3"',!MediaSource.isTypeSupported(n)))return alert('cannot play media - browser mediasource does not support either audio/mpeg or audio/mp4; codecs="mp3"'),null;var r=document.querySelector("#secondary-inner");r&&r.remove();var i=document.querySelector("#comments");let l,o;i&&i.remove(),document.body.insertAdjacentHTML("afterbegin",'<style>#pitahayax div { box-sizing:border-box;} #pitahayax ::selection { background: #0f9 } #pitahayax ::-moz-selection { background: #0f9 } #pitahayax .unused {display:none!important}</style><div id="pitahayax" style="background:black;position:fixed;top:0;left:0;z-index:99999999;display:flex;flex-direction:row;padding:4px;"><audio id="xaudio" controls style="width:150px;height:30px;display:none"></audio><div id="togglebutton" class="" style="cursor:pointer;margin-right:4px;color:#0f9;display:flex;border:1px solid #0f9;min-width:55px;min-height:24px;max-height:24px;line-height:15px;font-size:11px;font-family:consolas;align-items:center;justify-content:center;user-select:none;-moz-user-select:none;padding-left:1px;font-weight:500;user-select:none">play</div><div style="display:flex;border:1px solid #0f9;min-width:180px;min-height:24px;font-size:11px;font-family:consolas;color:#0f9;align-items:center;padding-left:6px;font-weight:500;position:relative;white-space:pre" id="attxdisplay">pitahaya.jollo.org</div><div class="unused" style="margin-left:5px;display:flex;border:1px solid #0f9;min-width:86px;max-width:86px;min-height:24px;font-size:11px;font-family:consolas;color:#0f9;align-items:center;padding-left:5px;user-select:none;font-weight:500"><input style="background:black;border:none;color:#0f9;width:70px;font-size:11px;font-family:consolas" placeholder="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" /></div></div>');var a=null,s=null,f=null,u=document.createElement("canvas");u.width=640,u.height=360;var c=u.getContext("2d");let p=!1,h=!1;function g(){let r=!0;if(p)return;if((l=document.querySelector("#movie_player > div.html5-video-container > video"))||(l=document.querySelector("video")),!l)return alert("no video player found on the page.."),null;l.playing||l.play();let i=l.videoHeight,u=l.videoWidth;if(360!==i||640!==u)return alert("please set video resolution to 360p before starting.."),null;p=!0;var g;g=new MediaSource,(o=document.querySelector("#xaudio")).src=URL.createObjectURL(g),o.oncanplaythrough=function(){r&&(r=!1,o.volume=1,setTimeout(()=>{o.play()},2e3))},g.addEventListener("sourceopen",function(){var r=this.addSourceBuffer(n);if(null==a){var i=new Blob([t],{type:"application/javascript"});a=new Worker(URL.createObjectURL(i))}let o=document.getElementById("attxdisplay");if(a.onmessage=function(e){switch(e.data[1].mediatype){case 0:"audio/mpeg"===n?r.appendBuffer(e.data[0]):(o.innerHTML="proc "+e.data[0].length,f.postMessage(e.data[0]))}},null==f){var u=new Blob([e],{type:"application/javascript"});f=new Worker(URL.createObjectURL(u))}f.onmessage=function(e){r.appendBuffer(e.data.buffer)};var p,g=62.5;function d(){if(!h)return null;var e=Date.now()-p;p+=g;var t=Math.max(0,g-e);l.playing&&function(){c.drawImage(l,0,0);var e=c.getImageData(0,0,640,360).data;a.postMessage(e)}(),setTimeout(d,t)}h=!0,p=Date.now()+g,s=setTimeout(d,g)})}let d=document.getElementById("togglebutton");return d.addEventListener("click",function(){p?(d.innerHTML="play",o.volume=0,p=!1,h=!1,l.pause(),clearTimeout(s),a&&a.terminate(),f&&f.terminate(),a=null,f=null):(d.innerHTML="pause",g())}),null}();